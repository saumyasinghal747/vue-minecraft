import{D as e,N as t,R as s,r as o,o as a,c as r,a as n,w as i,b as d,V as c,t as l,F as u,d as h,e as p,p as m,f,g as b,h as y,i as g}from"./vendor.7d046142.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const o=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,r)=>{const n=new URL(e,o);if(self[t].moduleMap[n])return s(self[t].moduleMap[n]);const i=new Blob([`import * as m from '${n}';`,`${t}.moduleMap['${n}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(i),onerror(){r(new Error(`Failed to import: ${e}`)),a(d)},onload(){s(self[t].moduleMap[n]),a(d)}});document.head.appendChild(d)})),self[t].moduleMap={}}}("/assets/");const w={name:"Ground",data:()=>({DoubleSide:e,NearestFilter:t}),mounted(){const e=this.$refs.grassTexture.texture;e.wrapS=s,e.wrapT=s,e.repeat.set(250,250);this.$refs.groundPlane.mesh.mesh.position.set(0,0,0)}},x=i(),P=x(((e,t,s,i,d,c)=>{const l=o("PlaneGeometry"),u=o("Texture"),h=o("BasicMaterial"),p=o("Mesh");return a(),r(p,{"receive-shadow":""},{default:x((()=>[n(l,{ref:"groundPlane",width:500,height:500},null,512),n(h,{side:e.DoubleSide},{default:x((()=>[n(u,{magFilter:e.NearestFilter,ref:"grassTexture",src:"/textures/grass.jpeg"},null,8,["magFilter"])])),_:1},8,["side"])])),_:1})}));w.render=P,w.__scopeId="data-v-32179c2d";const M={cobblestone:"jpeg",dirt:"jpeg",glass:"png",grass:"jpeg",log:"jpeg",stone:"jpeg",wood:"png"},k={name:"Cube",props:{type:String,position:{type:Object,default:{x:0,y:0,z:0}},opacity:{type:Number,default:1}},data:()=>({SIZE:1,FTYPES:M,NearestFilter:t}),mounted(){const{texture:e}=this.$refs.cubeTexture;e.wrapS=s,e.wrapT=s,e.repeat.set(1,1)},computed:{realPosition(){return{x:1*this.position.x,y:1*this.position.y,z:1*this.position.z+.5}}}},v=i(),I=v(((e,t,s,i,d,c)=>{const l=o("BoxGeometry"),u=o("Texture"),h=o("LambertMaterial"),p=o("Mesh");return a(),r(p,{"cast-shadow":"",position:c.realPosition},{default:v((()=>[n(l,{ref:"box",size:e.SIZE},null,8,["size"]),n(h,null,{default:v((()=>[n(u,{magFilter:e.NearestFilter,ref:"cubeTexture",src:`/textures/${s.type}.${e.FTYPES[s.type]}`},null,8,["magFilter","src"])])),_:1})])),_:1},8,["position"])}));k.render=I,k.__scopeId="data-v-72048fa4";const _={name:"World",components:{Ground:w,Cube:k},data:()=>({speedBoost:1,keys:{},debug:{},raycaster:new d,camera:null,renderer:null,scene:null}),mounted(){const{renderer:e}=this.$refs.renderer;this.renderer=e;const{camera:t}=this.$refs.camera,s=this.$refs.scene;this.scene=s,this.camera=t,t.rotation.order="XYZ",t.rotation.set(Math.PI/2,Math.PI,0),t.position.set(0,25,4),document.addEventListener("click",(e=>{document.body.requestPointerLock()})),document.addEventListener("mousemove",(e=>{document.pointerLockElement&&(t.rotation.y-=e.movementX/700,this.debug.y=t.rotation.y%(2*Math.PI)*180/Math.PI+90,this.debug.x=t.rotation.x%(2*Math.PI)*180/Math.PI-90,this.debug.y<180&&this.debug.y>0?(this.debug.rot="back",t.rotation.x-=e.movementY/700,this.debug.x<0?t.rotation.x=Math.PI/2:t.rotation.x>Math.PI&&(t.rotation.x=Math.PI)):(this.debug.rot="front",t.rotation.x+=e.movementY/700,t.rotation.x>Math.PI/2?t.rotation.x=Math.PI/2:t.rotation.x<-Math.PI/2&&(t.rotation.x=-Math.PI/2)))}));const o=this.keys;document.addEventListener("keydown",(e=>{switch(e.keyCode){case 65:case 37:o.left=!0;break;case 87:case 38:o.up=!0;break;case 68:case 39:o.right=!0;break;case 83:case 40:o.down=!0;break;case 16:o.shift=!0}})),document.addEventListener("keyup",(e=>{switch(e.keyCode){case 65:case 37:o.left=!1;break;case 87:case 38:o.up=!1;break;case 68:case 39:o.right=!1;break;case 83:case 40:o.down=!1;break;case 16:o.shift=!1}})),this.animate()},methods:{animate(){requestAnimationFrame(this.animate);const e=Math.sin(this.camera.rotation.z),t=Math.cos(this.camera.rotation.z);this.speedBoost+=((this.keys.shift?20:1)-this.speedBoost)/50;let s=0,o=0;this.keys.up&&(s-=.2*e*this.speedBoost,o-=.2*t*this.speedBoost),this.keys.down&&(s+=.2*e*this.speedBoost,o+=.2*t*this.speedBoost),this.keys.left&&(s-=.2*t*this.speedBoost,o+=.2*e*this.speedBoost),this.keys.right&&(s+=.2*t*this.speedBoost,o-=.2*e*this.speedBoost),this.camera.position.x-=this.collideAxis(s,!0),this.camera.position.y+=this.collideAxis(o,!0),this.renderer.render(this.scene.scene,this.camera)},abstractedPlayerCollision(e,t,s){const o=this.camera.position.clone().add(new c(1*e,0,1*t));this.raycaster.set(o,s.normalize());const[a]=this.raycaster.intersectObjects(this.collideables||[]);return a||null},collideAxis(e,t){if(0!==e){const s=Math.sign(e),o=this.abstractedPlayerCollision(t?0:-1,t?-1:0,new c(t?e:0,0,t?0:e)),a=this.abstractedPlayerCollision(t?0:1,t?1:0,new c(t?e:0,0,t?0:e)),r=o&&a?o.distance<a.distance?o:a:o||a;if(r&&r.distance<=Math.abs(e)+1){const e=t?"x":"z";return r.point[e]-camera.position[e]-1*s}}return e}}},z=i(),B=z(((e,t,s,i,d,c)=>{const p=o("PerspectiveCamera"),m=o("PointLight"),f=o("Ground"),b=o("Cube"),y=o("Scene"),g=o("Renderer");return a(),r("div",null,[n("h2",null,l(e.debug),1),n(g,{shadow:"",ref:"renderer",antialias:"",resize:"window"},{default:z((()=>[n(p,{ref:"camera",position:{z:100,x:0,y:0}},null,512),n(y,{background:"#9adcf1",ref:"scene"},{default:z((()=>[n(m,{"shadow-map-size":{width:512,height:512},"cast-shadow":"",position:{y:-50,z:4,x:0}}),n(m,{"shadow-map-size":{width:512,height:512},"cast-shadow":"",position:{y:50,z:50,x:50}}),n(f),(a(),r(u,null,h(10,(e=>n(b,{type:"dirt",position:{x:0,y:0,z:e-1}},null,8,["position"]))),64))])),_:1},512)])),_:1},512)])}));_.render=B,_.__scopeId="data-v-ef992f5e";const F={components:{World:_}};F.render=function(e,t,s,i,d,c){const l=o("router-view");return a(),r("div",null,[n(l)])};var L=p({state:{},mutations:{},actions:{},modules:{}});const j={name:"Home"},E=i();m("data-v-0f8e6b2b");const $=n("h1",null,"Vue Minecraft",-1),S=n("p",null,"Ever wanted to play minecraft for free? In your browser?",-1),C=n("button",null,"YES",-1);f();const T=E(((e,t,s,i,d,c)=>{const l=o("router-link");return a(),r("div",null,[$,S,n(l,{to:"/play"},{default:E((()=>[C])),_:1})])}));j.render=T,j.__scopeId="data-v-0f8e6b2b";const R=[{path:"/",name:"Home",component:j},{path:"/play",name:"Play",component:_}],N=b({history:y(),routes:R});g(F).use(L).use(N).mount("#app");
